<!DOCTYPE html>
<html lang="ko" layout:decorate="~{layout}" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>구직</title>
    <link rel="stylesheet" href="/style/style.css">
    <style>
        /* 분양라인 스타일 반영 */
        body { background: #f6f8fa; font-family: 'Noto Sans KR', sans-serif; }
        
        .job-board-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 0;
            background: transparent;
            border-radius: 0;
            box-shadow: none;
        }
        
        /* 상단 검색/필터 바 */
        .search-filter-bar { background:#fff; padding:24px; border-radius:16px; margin-bottom:24px; box-shadow:0 4px 24px rgba(44,90,160,0.10); }
        
        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .search-title { font-size: 1.6rem; font-weight:700; color:#2c5aa0; margin:0; }
        
        .register-btn { background: linear-gradient(135deg, #2c5aa0 0%, #f39c12 100%); color:#fff; padding:12px 24px; border-radius:10px; text-decoration:none; font-weight:600; transition:transform .2s, box-shadow .2s; display:inline-block; }
        .register-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(44,90,160,0.25); color:#fff; }
        
        .search-form { display:flex; gap:10px; align-items:center; flex-wrap:wrap; width:100%; }
        
        .career-select, .age-select, .gender-select { padding:12px 14px; border:2px solid #e1e5e9; border-radius:12px; background:#fff; font-size:14px; min-width:120px; transition:border-color .2s; }
        .career-select:focus, .age-select:focus, .gender-select:focus { outline:none; border-color:#2c5aa0; }
        
        .search-input { flex:1; padding:14px 16px; border:2px solid #e1e5e9; border-radius:50px; font-size:15px; min-width:160px; background:#fff; transition:border-color .2s; }
        .search-input:focus { outline:none; border-color:#2c5aa0; }
        
        .search-btn { background: linear-gradient(135deg, #2c5aa0 0%, #1e3f6b 100%); color:#fff; border:none; padding:12px 24px; border-radius:50px; cursor:pointer; font-weight:600; transition:transform .2s, box-shadow .2s; }
        .search-btn:hover { transform: translateY(-2px); box-shadow:0 6px 18px rgba(44,90,160,0.25); }
        
        /* 섹션 제목 */
        .board-title { font-size:1.5rem; font-weight:700; color:#2c5aa0; margin:30px 0 16px 0; display:flex; align-items:center; gap:10px; }
        .board-title::before { content:''; width:4px; height:24px; background:#f39c12; border-radius:2px; }
        
        /* 구직 게시글 리스트 */
        .job-list { background:#fff; border-radius:16px; overflow:hidden; box-shadow:0 4px 24px rgba(44,90,160,0.10); }
        
        .job-item { padding:20px; border-bottom:1px solid #eef1f5; transition: background .2s, transform .2s; }
        
        .job-item:hover { background:#f8f9ff; transform: translateY(-1px); }
        
        .job-item:last-child {
            border-bottom: none;
        }
        
        .job-title { font-size:18px; font-weight:700; color:#333; margin-bottom:8px; }
        
        .job-info { display:flex; gap:20px; color:#666; font-size:14px; flex-wrap:wrap; }
        
        .job-date {
            color: #999;
            font-size: 12px;
        }
        
        /* 페이지네이션 */
        .pagination {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 30px;
        }
        
        .page-link {
            padding: 10px 15px;
            border: 1px solid #ddd;
            background: white;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s;
        }
        
        .page-link:hover, .page-link.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        /* 반응형 */
        @media (max-width: 768px) {
            .search-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .search-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            .career-select, .age-select, .gender-select, .search-input {
                width: 100%;
                min-width: auto;
            }
            
            .job-info {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
<div class="job-board-container" layout:fragment="content">
    <!-- 상단 검색/필터 바 -->
    <div class="search-filter-bar">
        <div class="search-header">
            <h1 class="search-title">구직</h1>
            <a href="/job/create" class="register-btn">구직등록</a>
        </div>

        <form class="search-form" th:action="@{/job/list}" method="get">
            <input type="text" class="search-input" placeholder="구직글을 검색해보세요..." name="kw" th:value="${param.kw}">
            <select class="career-select" name="career" th:value="${param.career}">
                <option value="">경력</option>
                <option value="신입">신입</option>
                <option value="1-3년">1-3년</option>
                <option value="3-5년">3-5년</option>
                <option value="5년이상">5년이상</option>
            </select>
            <select class="age-select" name="age" th:value="${param.age}">
                <option value="">나이</option>
                <option value="20대">20대</option>
                <option value="30대">30대</option>
                <option value="40대">40대</option>
                <option value="50대이상">50대이상</option>
            </select>
            <select class="gender-select" name="gender" th:value="${param.gender}">
                <option value="">성별</option>
                <option value="남성">남성</option>
                <option value="여성">여성</option>
                <option value="무관">무관</option>
            </select>
            <button type="submit" class="search-btn">검색</button>
        </form>
    </div>
    
    <!-- 구직 게시글 리스트 -->
    <div th:if="${!paging.empty}">
        <h2 class="board-title">일반 구직</h2>
        <div class="job-list">
            <div th:each="jobing : ${paging}" class="job-item">
                <a th:href="@{/job/detail/{id}(id=${jobing.id})}" style="text-decoration: none; color: inherit;">
                    <div class="job-title" th:text="${jobing.name}">이름</div>
                    <div class="job-info">
                        <span th:text="${jobing.career != null ? jobing.career : '경력 미지정'}">경력</span>
                        <span th:text="${jobing.age != null ? jobing.age : '나이 미지정'}">나이</span>
                        <span th:text="${jobing.gender != null ? jobing.gender : '성별 미지정'}">성별</span>
                        <span th:text="${#strings.abbreviate(jobing.introduction, 20)}">내용</span>
                    </div>
                    <div class="job-date" th:text="${#temporals.format(jobing.createDate, 'yyyy-MM-dd')}">등록일</div>
                </a>
            </div>
        </div>
    </div>
    
    <!-- 페이지네이션 -->
    <div class="pagination" th:if="${paging.totalPages > 1}">
        <a th:if="${paging.hasPrevious()}" th:href="@{/job/list(page=${paging.number - 1}, kw=${param.kw})}" class="page-link">이전</a>
        <a th:each="pageNum : ${#numbers.sequence(0, paging.totalPages - 1)}" 
           th:href="@{/job/list(page=${pageNum}, kw=${param.kw})}" 
           th:text="${pageNum + 1}" 
           th:class="${pageNum == paging.number ? 'page-link active' : 'page-link'}">1</a>
        <a th:if="${paging.hasNext()}" th:href="@{/job/list(page=${paging.number + 1}, kw=${param.kw})}" class="page-link">다음</a>
    </div>
</div>
</body>
</html>
